<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Code Puppy v2.0 - Technical Architecture</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0a0a0f;
      --bg-secondary: #12121a;
      --bg-tertiary: #1a1a25;
      --bg-card: #16161f;
      --bg-hover: #1e1e2a;
      --border-color: #2a2a3a;
      --border-highlight: #3a3a4a;
      --text-primary: #f1f5f9;
      --text-secondary: #94a3b8;
      --text-muted: #64748b;
      --accent-blue: #3b82f6;
      --accent-purple: #8b5cf6;
      --accent-green: #10b981;
      --accent-orange: #f59e0b;
      --accent-red: #ef4444;
      --accent-cyan: #06b6d4;
      --accent-pink: #ec4899;
      --gradient-1: linear-gradient(135deg, #3b82f6, #8b5cf6);
      --gradient-2: linear-gradient(135deg, #10b981, #06b6d4);
      --gradient-3: linear-gradient(135deg, #f59e0b, #ef4444);
      --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.3);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.4);
      --shadow-lg: 0 8px 24px rgba(0,0,0,0.5);
      --shadow-glow: 0 0 30px rgba(59, 130, 246, 0.15);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--font-sans);
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: var(--bg-secondary);
    }
    ::-webkit-scrollbar-thumb {
      background: var(--border-color);
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: var(--border-highlight);
    }

    /* Layout */
    .app-container {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      width: 280px;
      background: var(--bg-secondary);
      border-right: 1px solid var(--border-color);
      padding: 1.5rem;
      position: fixed;
      height: 100vh;
      overflow-y: auto;
      z-index: 100;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-color);
      margin-bottom: 1.5rem;
    }

    .brand-icon {
      font-size: 2rem;
      filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.5));
    }

    .brand h1 {
      font-size: 1.25rem;
      font-weight: 700;
      background: var(--gradient-1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .brand-version {
      font-size: 0.7rem;
      color: var(--text-muted);
      font-family: var(--font-mono);
    }

    /* Navigation */
    .nav-section {
      margin-bottom: 1.5rem;
    }

    .nav-label {
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
      padding-left: 0.5rem;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.6rem 0.75rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.85rem;
      color: var(--text-secondary);
      transition: all 0.15s ease;
      margin-bottom: 2px;
    }

    .nav-item:hover {
      background: var(--bg-hover);
      color: var(--text-primary);
    }

    .nav-item.active {
      background: rgba(59, 130, 246, 0.15);
      color: var(--accent-blue);
      font-weight: 500;
    }

    .nav-item .icon {
      width: 18px;
      text-align: center;
      font-size: 0.9rem;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      margin-left: 280px;
      padding: 2rem 3rem;
      max-width: 1400px;
    }

    /* Sections */
    .section {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Headers */
    .section-header {
      margin-bottom: 2rem;
    }

    .section-header h2 {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      background: var(--gradient-1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .section-header p {
      color: var(--text-secondary);
      font-size: 1rem;
      max-width: 700px;
    }

    h3 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--text-primary);
    }

    h4 {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
      color: var(--text-secondary);
    }

    /* Cards */
    .card {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      transition: all 0.2s ease;
    }

    .card:hover {
      border-color: var(--border-highlight);
      box-shadow: var(--shadow-glow);
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .card-icon {
      font-size: 1.5rem;
    }

    .card-title {
      font-size: 1.1rem;
      font-weight: 600;
    }

    /* Grid Layouts */
    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
    }

    .grid-4 {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1rem;
    }

    @media (max-width: 1200px) {
      .grid-3 { grid-template-columns: repeat(2, 1fr); }
      .grid-4 { grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 900px) {
      .grid-2, .grid-3, .grid-4 { grid-template-columns: 1fr; }
    }

    /* Stats */
    .stat-card {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 10px;
      padding: 1.25rem;
      text-align: center;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      font-family: var(--font-mono);
      background: var(--gradient-1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .stat-label {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-top: 0.25rem;
    }

    .stat-sub {
      font-size: 0.7rem;
      color: var(--text-muted);
      font-family: var(--font-mono);
    }

    /* Code Blocks */
    .code-block {
      background: var(--bg-primary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 1rem;
      overflow-x: auto;
      font-family: var(--font-mono);
      font-size: 0.8rem;
      line-height: 1.5;
      margin: 1rem 0;
    }

    .code-block pre {
      margin: 0;
      white-space: pre;
    }

    code {
      font-family: var(--font-mono);
      background: var(--bg-tertiary);
      padding: 0.15rem 0.4rem;
      border-radius: 4px;
      font-size: 0.85em;
      color: var(--accent-cyan);
    }

    /* Tables */
    .table-container {
      overflow-x: auto;
      border-radius: 8px;
      border: 1px solid var(--border-color);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
    }

    th {
      background: var(--bg-tertiary);
      padding: 0.75rem 1rem;
      text-align: left;
      font-weight: 600;
      color: var(--text-secondary);
      border-bottom: 1px solid var(--border-color);
      white-space: nowrap;
    }

    td {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid var(--border-color);
    }

    tr:hover td {
      background: var(--bg-hover);
    }

    tr:last-child td {
      border-bottom: none;
    }

    /* Tags & Badges */
    .tag {
      display: inline-block;
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-size: 0.7rem;
      font-weight: 600;
      font-family: var(--font-mono);
      text-transform: uppercase;
    }

    .tag-blue { background: rgba(59, 130, 246, 0.2); color: var(--accent-blue); }
    .tag-purple { background: rgba(139, 92, 246, 0.2); color: var(--accent-purple); }
    .tag-green { background: rgba(16, 185, 129, 0.2); color: var(--accent-green); }
    .tag-orange { background: rgba(245, 158, 11, 0.2); color: var(--accent-orange); }
    .tag-red { background: rgba(239, 68, 68, 0.2); color: var(--accent-red); }
    .tag-cyan { background: rgba(6, 182, 212, 0.2); color: var(--accent-cyan); }

    .status-dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      margin-right: 0.5rem;
    }

    .status-dot.online { background: var(--accent-green); box-shadow: 0 0 6px var(--accent-green); }
    .status-dot.warning { background: var(--accent-orange); }
    .status-dot.offline { background: var(--accent-red); }

    /* Diagrams */
    .diagram-container {
      background: var(--bg-primary);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 2rem;
      overflow-x: auto;
      margin: 1.5rem 0;
    }

    .diagram-ascii {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      line-height: 1.4;
      color: var(--text-secondary);
      white-space: pre;
    }

    .diagram-ascii .highlight-blue { color: var(--accent-blue); }
    .diagram-ascii .highlight-purple { color: var(--accent-purple); }
    .diagram-ascii .highlight-green { color: var(--accent-green); }
    .diagram-ascii .highlight-orange { color: var(--accent-orange); }
    .diagram-ascii .highlight-cyan { color: var(--accent-cyan); }

    /* Tier Pyramid */
    .tier-pyramid {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      padding: 2rem;
    }

    .tier-level {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem 2rem;
      border-radius: 8px;
      font-weight: 600;
      font-size: 0.9rem;
      transition: transform 0.2s ease;
      cursor: default;
    }

    .tier-level:hover {
      transform: scale(1.02);
    }

    .tier-1 {
      width: 250px;
      background: linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(139, 92, 246, 0.1));
      border: 1px solid rgba(139, 92, 246, 0.5);
    }

    .tier-2 {
      width: 350px;
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(59, 130, 246, 0.1));
      border: 1px solid rgba(59, 130, 246, 0.5);
    }

    .tier-3 {
      width: 450px;
      background: linear-gradient(135deg, rgba(6, 182, 212, 0.3), rgba(6, 182, 212, 0.1));
      border: 1px solid rgba(6, 182, 212, 0.5);
    }

    .tier-4 {
      width: 550px;
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(16, 185, 129, 0.1));
      border: 1px solid rgba(16, 185, 129, 0.5);
    }

    .tier-5 {
      width: 650px;
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.3), rgba(245, 158, 11, 0.1));
      border: 1px solid rgba(245, 158, 11, 0.5);
    }

    .tier-label {
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      margin-right: 1rem;
    }

    .tier-model {
      font-family: var(--font-mono);
      font-size: 0.85rem;
    }

    /* Flow Diagrams */
    .flow-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 1.5rem;
      flex-wrap: wrap;
    }

    .flow-box {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 1rem 1.5rem;
      text-align: center;
      min-width: 140px;
    }

    .flow-box.primary {
      border-color: var(--accent-blue);
      box-shadow: 0 0 15px rgba(59, 130, 246, 0.2);
    }

    .flow-box h5 {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-bottom: 0.25rem;
    }

    .flow-box p {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    .flow-arrow {
      font-size: 1.5rem;
      color: var(--text-muted);
    }

    /* Rules List */
    .rules-list {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }

    .rule-item {
      display: flex;
      gap: 0.75rem;
      padding: 1rem;
      background: var(--bg-tertiary);
      border-radius: 8px;
      border: 1px solid var(--border-color);
    }

    .rule-number {
      font-family: var(--font-mono);
      font-size: 0.8rem;
      font-weight: 700;
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--gradient-1);
      border-radius: 6px;
      flex-shrink: 0;
    }

    .rule-content h5 {
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .rule-content p {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    /* Agent Cards */
    .agent-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 1rem;
    }

    .agent-card {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 10px;
      padding: 1.25rem;
      text-align: center;
      transition: all 0.2s ease;
    }

    .agent-card:hover {
      transform: translateY(-2px);
      border-color: var(--accent-blue);
      box-shadow: var(--shadow-glow);
    }

    .agent-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .agent-name {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .agent-role {
      font-size: 0.7rem;
      color: var(--text-muted);
    }

    /* Tree Structure */
    .tree {
      font-family: var(--font-mono);
      font-size: 0.8rem;
      line-height: 1.6;
      color: var(--text-secondary);
    }

    .tree .folder { color: var(--accent-blue); }
    .tree .file { color: var(--text-muted); }
    .tree .highlight { color: var(--accent-green); font-weight: 600; }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 0.5rem;
      border-bottom: 1px solid var(--border-color);
      margin-bottom: 1.5rem;
    }

    .tab {
      padding: 0.75rem 1.25rem;
      font-size: 0.85rem;
      color: var(--text-secondary);
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.15s ease;
    }

    .tab:hover {
      color: var(--text-primary);
    }

    .tab.active {
      color: var(--accent-blue);
      border-bottom-color: var(--accent-blue);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Metrics */
    .metrics-row {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--border-color);
    }

    .metrics-row:last-child {
      border-bottom: none;
    }

    .metric-name {
      flex: 1;
      font-size: 0.85rem;
    }

    .metric-bar {
      flex: 2;
      height: 8px;
      background: var(--bg-tertiary);
      border-radius: 4px;
      overflow: hidden;
    }

    .metric-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    .metric-value {
      font-family: var(--font-mono);
      font-size: 0.8rem;
      width: 80px;
      text-align: right;
      color: var(--text-muted);
    }

    /* Mobile Menu Toggle */
    .mobile-menu-toggle {
      display: none;
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 1000;
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 0.75rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .mobile-menu-toggle:hover {
      background: var(--bg-hover);
      border-color: var(--accent-blue);
    }

    .mobile-menu-toggle svg {
      width: 24px;
      height: 24px;
      fill: var(--text-primary);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .mobile-menu-toggle {
        display: block;
      }

      .sidebar {
        width: 280px;
        height: 100vh;
        position: fixed;
        left: -280px;
        top: 0;
        transition: left 0.3s ease;
        border-right: 1px solid var(--border-color);
        border-bottom: none;
        overflow-y: auto;
        z-index: 999;
      }

      .sidebar.active {
        left: 0;
      }

      .sidebar-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 998;
      }

      .sidebar-overlay.active {
        display: block;
      }
      
      .main-content {
        margin-left: 0;
        padding: 1rem;
      }

      .section-header h2 {
        font-size: 1.75rem;
      }

      .section-header p {
        font-size: 0.95rem;
      }

      .stat-card {
        padding: 1rem;
      }

      .stat-value {
        font-size: 1.5rem;
      }

      .stat-label {
        font-size: 0.8rem;
      }

      .rules-list {
        grid-template-columns: 1fr;
      }

      /* Mobile diagram optimizations */
      .diagram-container {
        padding: 1rem;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }

      .diagram-ascii {
        font-size: 0.65rem;
        line-height: 1.3;
      }

      /* Make cards stack on mobile */
      .card {
        margin-bottom: 1rem;
      }

      .card-header {
        font-size: 0.95rem;
        padding: 0.75rem 1rem;
      }

      /* Tier pyramid mobile */
      .tier-pyramid {
        padding: 1rem;
        gap: 0.3rem;
      }

      .tier-level {
        padding: 0.75rem 1.5rem;
        font-size: 0.8rem;
        width: 100%;
      }

      /* Nav items mobile */
      .nav-section {
        margin-bottom: 1rem;
      }

      .nav-item {
        padding: 0.75rem;
        font-size: 0.9rem;
      }

      /* Brand mobile */
      .brand {
        padding-bottom: 1rem;
        margin-bottom: 1rem;
      }

      .brand-name {
        font-size: 1.25rem;
      }

      .brand-tagline {
        font-size: 0.7rem;
      }
    }

    /* Small mobile devices */
    @media (max-width: 480px) {
      .stat-value {
        font-size: 1.25rem;
      }

      .diagram-ascii {
        font-size: 0.6rem;
        line-height: 1.2;
      }

      .section-header h2 {
        font-size: 1.5rem;
      }

      .card-title {
        font-size: 0.9rem;
      }
    }

    /* Tablet landscape */
    @media (min-width: 769px) and (max-width: 1024px) {
      .sidebar {
        width: 240px;
      }

      .main-content {
        margin-left: 240px;
        padding: 2rem;
      }

      .diagram-ascii {
        font-size: 0.7rem;
      }
    }

    /* Animations */
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .pulse {
      animation: pulse 2s ease-in-out infinite;
    }

    /* Tooltips */
    [data-tooltip] {
      position: relative;
      cursor: help;
    }

    [data-tooltip]:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: var(--bg-primary);
      border: 1px solid var(--border-color);
      padding: 0.5rem 0.75rem;
      border-radius: 6px;
      font-size: 0.75rem;
      white-space: nowrap;
      z-index: 100;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" aria-label="Toggle menu">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
      </svg>
    </button>

    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay"></div>

    <!-- Sidebar Navigation -->
    <aside class="sidebar">
      <div class="brand">
        <div class="brand-icon">ğŸ¶</div>
        <div>
          <h1>Code Puppy</h1>
          <div class="brand-version">v2.0 â€¢ BART System (Belief â€¢ Augmented â€¢ Reasoning â€¢ Tasking)</div>
        </div>
      </div>

      <div class="nav-section">
        <div class="nav-label">Overview</div>
        <div class="nav-item active" data-section="overview">
          <span class="icon">ğŸ </span> Architecture Overview
        </div>
        <div class="nav-item" data-section="system-diagram">
          <span class="icon">ğŸ“</span> System Diagram
        </div>
      </div>

      <div class="nav-section">
        <div class="nav-label">Core Systems</div>
        <div class="nav-item" data-section="epistemic">
          <span class="icon">ğŸ§ </span> BART Orchestration
        </div>
        <div class="nav-item" data-section="model-router">
          <span class="icon">ğŸ”€</span> Intelligent Router
        </div>
        <div class="nav-item" data-section="capacity">
          <span class="icon">ğŸ“Š</span> Capacity Tracking
        </div>
        <div class="nav-item" data-section="smart-selection">
          <span class="icon">ğŸ¯</span> Smart Selection
        </div>
        <div class="nav-item" data-section="credentials">
          <span class="icon">ğŸ”</span> Credential Availability
        </div>
        <div class="nav-item" data-section="workload-chains">
          <span class="icon">â›“ï¸</span> Workload Chains
        </div>
        <div class="nav-item" data-section="cerebras">
          <span class="icon">âš¡</span> Cerebras GLM 4.7
        </div>
        <div class="nav-item" data-section="token-budget">
          <span class="icon">ğŸ’°</span> Token Budget
        </div>
      </div>

      <div class="nav-section">
        <div class="nav-label">Agents & Tools</div>
        <div class="nav-item" data-section="agents">
          <span class="icon">ğŸ•</span> Agent System
        </div>
        <div class="nav-item" data-section="tools">
          <span class="icon">ğŸ”§</span> Tools Layer
        </div>
        <div class="nav-item" data-section="mcp">
          <span class="icon">ğŸ”Œ</span> MCP Infrastructure
        </div>
      </div>

      <div class="nav-section">
        <div class="nav-label">Infrastructure</div>
        <div class="nav-item" data-section="messaging">
          <span class="icon">ğŸ“¨</span> Messaging Bus
        </div>
        <div class="nav-item" data-section="observability">
          <span class="icon">ğŸ“Š</span> Observability
        </div>
        <div class="nav-item" data-section="files">
          <span class="icon">ğŸ“</span> File Structure
        </div>
      </div>

      <div style="margin-top: auto; padding-top: 1.5rem; border-top: 1px solid var(--border-color);">
        <div style="font-size: 0.7rem; color: var(--text-muted);">
          <div style="margin-bottom: 0.5rem;"><span class="status-dot online"></span>All Systems Operational</div>
          <div>Updated: Jan 30, 2026</div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

      <!-- OVERVIEW SECTION -->
      <section id="overview" class="section active">
        <div class="section-header">
          <h2>ğŸ—ï¸ Technical Architecture</h2>
          <p>Code Puppy v2.0 implements the BART System (Belief-Augmented Reasoning & Tasking) - a Traycer-style architecture with Plan â†’ Execute â†’ Verify loop, multi-tier model routing, and bidirectional verification.</p>
        </div>

        <div class="grid-4">
          <div class="stat-card">
            <div class="stat-value">6,061</div>
            <div class="stat-label">Tests Passing</div>
            <div class="stat-sub">64% coverage â€¢ 99.98% pass rate</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">1,500+</div>
            <div class="stat-label">tok/sec</div>
            <div class="stat-sub">Cerebras GLM 4.7</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">5</div>
            <div class="stat-label">Model Tiers</div>
            <div class="stat-sub">Smart Routing</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">20+</div>
            <div class="stat-label">Agents</div>
            <div class="stat-sub">Specialized Pack</div>
          </div>
        </div>

        <!-- Test Results Badge -->
        <div class="card" style="margin-top: 1.5rem; background: linear-gradient(135deg, rgba(106, 17, 203, 0.1), rgba(37, 99, 235, 0.1)); border-left: 4px solid var(--accent-purple);">
          <div class="card-header">
            <span class="card-icon">âœ…</span>
            <span class="card-title">Latest Test Results</span>
            <span style="font-size: 0.8rem; color: var(--text-muted); margin-left: auto;">January 31, 2026</span>
          </div>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 1rem; padding: 0 1rem 1rem;">
            <div style="text-align: center;">
              <div style="font-size: 1.8rem; font-weight: 700; color: #10b981;">6,061</div>
              <div style="font-size: 0.85rem; color: var(--text-muted);">Passed</div>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 1.8rem; font-weight: 700; color: #ef4444;">1</div>
              <div style="font-size: 0.85rem; color: var(--text-muted);">Failed</div>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 1.8rem; font-weight: 700; color: var(--accent-blue);">83</div>
              <div style="font-size: 0.85rem; color: var(--text-muted);">Skipped</div>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 1.8rem; font-weight: 700; color: var(--accent-purple);">99.98%</div>
              <div style="font-size: 0.85rem; color: var(--text-muted);">Pass Rate</div>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 1.8rem; font-weight: 700; color: var(--accent-orange);">64%</div>
              <div style="font-size: 0.85rem; color: var(--text-muted);">Coverage</div>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 1.8rem; font-weight: 700; color: var(--text-primary);">87s</div>
              <div style="font-size: 0.85rem; color: var(--text-muted);">Duration</div>
            </div>
          </div>
          <div style="padding: 0.75rem 1rem; background: rgba(0,0,0,0.1); border-radius: 6px; margin: 0 1rem 1rem; font-size: 0.85rem;">
            <strong style="color: var(--accent-purple);">âœ¨ BART System Verified:</strong> All core orchestration modules passing â€¢ 100% compatibility maintained
          </div>
        </div>

        <div class="grid-2" style="margin-top: 2rem;">
          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ¯</span>
              <span class="card-title">Core Principles</span>
            </div>
            <ul style="list-style: none; font-size: 0.9rem;">
              <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);">
                <strong style="color: var(--accent-purple);">Belief-Augmented Reasoning</strong>
                <span style="color: var(--text-muted);"> â€” Separating the 'Belief State' (Truth) from the 'Execution State' (Code)</span>
              </li>
              <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);">
                <strong style="color: var(--accent-blue);">Tiered Model Routing</strong>
                <span style="color: var(--text-muted);"> â€” Right model for the right task</span>
              </li>
              <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);">
                <strong style="color: var(--accent-green);">Bidirectional Verification</strong>
                <span style="color: var(--text-muted);"> â€” The 'Ralph Loop' validates output against belief, not just syntax</span>
              </li>
              <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);">
                <strong style="color: var(--accent-orange);">Token Budget Governance</strong>
                <span style="color: var(--text-muted);"> â€” Prevent 429s with smart rate limiting</span>
              </li>
              <li style="padding: 0.5rem 0;">
                <strong style="color: var(--accent-cyan);">Logfire Observability</strong>
                <span style="color: var(--text-muted);"> â€” Full tracing of all operations</span>
              </li>
            </ul>
          </div>

          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ“¦</span>
              <span class="card-title">Core Components</span>
            </div>
            <div class="table-container" style="border: none;">
              <table>
                <tr>
                  <td><code>BARTOrchestrator</code></td>
                  <td><span class="tag tag-purple">Belief & Reasoning</span></td>
                </tr>
                <tr>
                  <td><code>HuskyExecutionLayer</code></td>
                  <td><span class="tag tag-orange">Tasking</span></td>
                </tr>
                <tr>
                  <td><code>RalphLoopVerifier</code></td>
                  <td><span class="tag tag-green">Bidirectional</span></td>
                </tr>
                <tr>
                  <td><code>ModelRouter</code></td>
                  <td><span class="tag tag-blue">Router</span></td>
                </tr>
                <tr>
                  <td><code>TokenBudgetManager</code></td>
                  <td><span class="tag tag-red">Governor</span></td>
                </tr>
                <tr>
                  <td><code>ContextCurator</code></td>
                  <td><span class="tag tag-cyan">Slicer</span></td>
                </tr>
              </table>
            </div>
          </div>
        </div>

        <h3 style="margin-top: 2rem;">Plan â†’ Execute â†’ Verify Loop</h3>
        <div class="flow-container">
          <div class="flow-box primary">
            <h5>Phase 1</h5>
            <p>ğŸ§  PLAN</p>
            <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem;">Claude Opus 4.5</div>
          </div>
          <div class="flow-arrow">â†’</div>
          <div class="flow-box primary">
            <h5>Phase 2</h5>
            <p>ğŸ¦® EXECUTE</p>
            <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem;">Cerebras GLM 4.7</div>
          </div>
          <div class="flow-arrow">â†’</div>
          <div class="flow-box primary">
            <h5>Phase 3</h5>
            <p>ğŸ‘ï¸ VERIFY</p>
            <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem;">Ralph Loop</div>
          </div>
          <div class="flow-arrow" style="transform: rotate(180deg);">â†©</div>
          <div style="font-size: 0.75rem; color: var(--accent-red);">Retry if FAIL</div>
        </div>
      </section>

      <!-- SYSTEM DIAGRAM SECTION -->
      <section id="system-diagram" class="section">
        <div class="section-header">
          <h2>ğŸ“ System Architecture Diagram</h2>
          <p>Complete visualization of the Code Puppy v2.0 BART System (Belief-Augmented Reasoning & Tasking) architecture.</p>
        </div>

        <div class="diagram-container">
          <div class="diagram-ascii">
<span class="highlight-blue">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="highlight-blue">â”‚</span>                                    <span class="highlight-purple">CODE PUPPY v2.0</span>                                       <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>                     BART System (Belief â€¢ Augmented â€¢ Reasoning â€¢ Tasking)             <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="highlight-blue">â”‚</span>                                                                                         <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-cyan">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-cyan">â”‚</span>                           USER INTERFACE LAYER                                   <span class="highlight-cyan">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-cyan">â”‚</span>  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                <span class="highlight-cyan">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-cyan">â”‚</span>  â”‚    CLI     â”‚  â”‚    API     â”‚  â”‚  WebSocket â”‚  â”‚   PTY      â”‚                <span class="highlight-cyan">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-cyan">â”‚</span>  â”‚ (Textual)  â”‚  â”‚  (FastAPI) â”‚  â”‚  Realtime  â”‚  â”‚  Manager   â”‚                <span class="highlight-cyan">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-cyan">â”‚</span>  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                <span class="highlight-cyan">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-cyan">â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>           â”‚               â”‚               â”‚               â”‚                            <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>           â–¼               â–¼               â–¼               â–¼                            <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-green">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-green">â”‚</span>                          MESSAGING / EVENT BUS                                   <span class="highlight-green">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-green">â”‚</span>  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        <span class="highlight-green">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-green">â”‚</span>  â”‚  MessageBus  â”‚  â”‚  Renderers   â”‚  â”‚   Spinner    â”‚  â”‚ QueueConsole â”‚        <span class="highlight-green">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-green">â”‚</span>  â”‚  (Bidirect)  â”‚  â”‚  (Rich/MD)   â”‚  â”‚   System     â”‚  â”‚              â”‚        <span class="highlight-green">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-green">â”‚</span>  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        <span class="highlight-green">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-green">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>                                         â”‚                                              <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>                                         â–¼                                              <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â”‚</span>                   ğŸ§  BELIEF & REASONING LAYER (The Brain)                      <span class="highlight-purple">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â”‚</span>                                                                                 <span class="highlight-purple">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â”‚</span>  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    <span class="highlight-purple">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â”‚</span>  â”‚   PLAN      â”‚                                        â”‚     VERIFY      â”‚    <span class="highlight-purple">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â”‚</span>  â”‚ (Opus 4.5)  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  (Ralph Loop)   â”‚    <span class="highlight-purple">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â”‚</span>  â”‚             â”‚                                        â”‚                 â”‚    <span class="highlight-purple">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â”‚</span>  â”‚ â€¢ Interview â”‚                                        â”‚ â€¢ Static Anal.  â”‚    <span class="highlight-purple">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â”‚</span>  â”‚ â€¢ Decompose â”‚                                        â”‚ â€¢ Drift Detect  â”‚    <span class="highlight-purple">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â”‚</span>  â”‚ â€¢ Plan Epicsâ”‚                                        â”‚ â€¢ Spec Check    â”‚    <span class="highlight-purple">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â”‚</span>  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”˜    <span class="highlight-purple">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â”‚</span>         â”‚                                                        â”‚              <span class="highlight-purple">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â”‚</span>         â”‚                <span class="highlight-orange">â—„â”€â”€â”€â”€â”€â”€â”€ Retry if FAIL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>              <span class="highlight-purple">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â”‚</span>         â”‚                                                                         <span class="highlight-purple">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-purple">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>            â”‚                                                                           <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>            â”‚  <span class="highlight-cyan">Context Filter (Curated PRDs, Specs, Constraints)</span>                   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>            â–¼                                                                           <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>                   ğŸ¦® TASKING & EXECUTION LAYER (The Hands)                     <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>                                                                                 <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                            <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>  â”‚    EXECUTE      â”‚                                                            <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>  â”‚  (Cerebras GLM) â”‚  <span class="highlight-cyan">Evidence/Code â–²</span>                                        <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>  â”‚                 â”‚                                                            <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>  â”‚ â€¢ ContextCuratorâ”‚                                                            <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>  â”‚ â€¢ HuskyExecutionâ”‚                                                            <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>  â”‚ â€¢ TaskDecomposerâ”‚                                                            <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                            <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>                                                                                 <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>                                         â”‚                                              <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>                                         â–¼                                              <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>                            ğŸ”€ MODEL ROUTER                                       <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>                                                                                 <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>  Tier 1 â”€â”€â”€â”€â”€â–º Claude Opus 4.5 â”€â”€â”€â”€â”€â”€â–º Planning, Security, QA                   <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>  Tier 2 â”€â”€â”€â”€â”€â–º Codex 5.2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Complex Logic, Refactoring               <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>  Tier 3 â”€â”€â”€â”€â”€â–º Claude Sonnet 4.5 â”€â”€â”€â”€â–º Class Design, API Design                 <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>  Tier 4 â”€â”€â”€â”€â”€â–º Gemini 3 Flash/Pro â”€â”€â”€â–º Context Search, Summarization            <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>  Tier 5 â”€â”€â”€â”€â”€â–º <span class="highlight-green">Cerebras GLM 4.7</span> â”€â”€â”€â”€â”€â–º Code Gen, Tests, Linting                 <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â”‚</span>                                                                                 <span class="highlight-orange">â”‚</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  <span class="highlight-orange">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>   <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>                                         â”‚                                              <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>                                         â–¼                                              <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  â”‚ TokenBudgetMgr â”‚  â”‚ CircuitBreaker â”‚  â”‚ ConnectionPool â”‚  â”‚ ResponseCache  â”‚        <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  â”‚   (Governor)   â”‚  â”‚    (Fault)     â”‚  â”‚   (HTTP/2)     â”‚  â”‚   (Cache)      â”‚        <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â”‚</span>                                                                                         <span class="highlight-blue">â”‚</span>
<span class="highlight-blue">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
          </div>
        </div>
      </section>

      <!-- BART SECTION -->
      <section id="epistemic" class="section">
        <div class="section-header">
          <h2>ğŸ§  BART Orchestration System</h2>
          <p>The Traycer-style architecture implementing Belief-Augmented Reasoning & Tasking with Plan â†’ Execute â†’ Verify loop and bidirectional verification.</p>
        </div>

        <div class="card" style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(59, 130, 246, 0.1)); border-color: var(--accent-purple);">
          <div class="card-header">
            <span class="card-icon">ğŸ“–</span>
            <span class="card-title">B.A.R.T. - Core Concept</span>
          </div>
          <div class="grid-2" style="margin-top: 1rem;">
            <div>
              <h4 style="color: var(--accent-purple);">ğŸ…±ï¸ Belief</h4>
              <p style="font-size: 0.85rem; color: var(--text-secondary);">The "Truth" state (PRDs, Specs, Constraints). Maintained by the <strong>Reasoning Layer</strong>.</p>
            </div>
            <div>
              <h4 style="color: var(--accent-blue);">ğŸ…°ï¸ Augmented</h4>
              <p style="font-size: 0.85rem; color: var(--text-secondary);">The system uses tools (MCP, Search) to support and validate its beliefs.</p>
            </div>
            <div>
              <h4 style="color: var(--accent-green);">ğŸ† Reasoning</h4>
              <p style="font-size: 0.85rem; color: var(--text-secondary);">The "Brain" (Claude Opus) that plans and verifies against the belief state.</p>
            </div>
            <div>
              <h4 style="color: var(--accent-orange);">ğŸ†ƒ Tasking</h4>
              <p style="font-size: 0.85rem; color: var(--text-secondary);">The "Hands" (Cerebras GLM) that execute specific phases with filtered context.</p>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <span class="card-icon">ğŸ“Š</span>
            <span class="card-title">EpistemicStateArtifact - Pydantic Models</span>
          </div>
          <div class="code-block">
            <pre>EpistemicStateArtifact
â”œâ”€â”€ goals: List[Goal]           <span style="color: var(--text-muted)"># What we're trying to achieve</span>
â”œâ”€â”€ hypotheses: List[Hypothesis] <span style="color: var(--text-muted)"># Testable predictions</span>
â”œâ”€â”€ assumptions: List[Assumption] <span style="color: var(--text-muted)"># Things we assume true</span>
â”œâ”€â”€ constraints: List[Constraint] <span style="color: var(--text-muted)"># Hard/soft limits</span>
â”œâ”€â”€ gaps: List[Gap]             <span style="color: var(--text-muted)"># Knowledge gaps (CRITICAL, HIGH, MEDIUM, LOW)</span>
â”œâ”€â”€ epics: List[Epic]           <span style="color: var(--text-muted)"># High-level work units</span>
â”‚   â””â”€â”€ phases: List[Phase]     <span style="color: var(--text-muted)"># Sequential execution phases</span>
â”‚       â””â”€â”€ milestones: List[Milestone]  <span style="color: var(--text-muted)"># Atomic work items</span>
â”‚           â””â”€â”€ checkpoints: List[Checkpoint]  <span style="color: var(--text-muted)"># Verification points</span>
â””â”€â”€ evidence: List[Evidence]    <span style="color: var(--text-muted)"># Supporting data</span></pre>
          </div>
        </div>

        <h3>Orchestration Flow</h3>
        <div class="grid-3">
          <div class="card" style="border-left: 3px solid var(--accent-purple);">
            <h4 style="color: var(--accent-purple);">1. REASONING LAYER (Plan)</h4>
            <ul style="font-size: 0.85rem; color: var(--text-secondary); list-style: none;">
              <li style="padding: 0.25rem 0;">â€¢ <code>conduct_planning_interview()</code></li>
              <li style="padding: 0.25rem 0;">â€¢ Extract goals, assumptions, constraints</li>
              <li style="padding: 0.25rem 0;">â€¢ Identify gaps and hypotheses</li>
              <li style="padding: 0.25rem 0;">â€¢ Decompose into Epics â†’ Phases â†’ Milestones</li>
              <li style="padding: 0.25rem 0;">â€¢ Create EpistemicStateArtifact</li>
            </ul>
          </div>

          <div class="card" style="border-left: 3px solid var(--accent-orange);">
            <h4 style="color: var(--accent-orange);">2. TASKING LAYER (Execute)</h4>
            <ul style="font-size: 0.85rem; color: var(--text-secondary); list-style: none;">
              <li style="padding: 0.25rem 0;">â€¢ <code>ContextCurator.slice_for_milestone()</code></li>
              <li style="padding: 0.25rem 0;">â€¢ Create MinimumViableContext (MVC)</li>
              <li style="padding: 0.25rem 0;">â€¢ Respect 50K token limit for Cerebras</li>
              <li style="padding: 0.25rem 0;">â€¢ <code>HuskyExecutionLayer.execute()</code></li>
              <li style="padding: 0.25rem 0;">â€¢ Apply GLMPromptOptimizer (Rules #1-4)</li>
            </ul>
          </div>

          <div class="card" style="border-left: 3px solid var(--accent-green);">
            <h4 style="color: var(--accent-green);">3. BIDIRECTIONAL LAYER (Verify)</h4>
            <ul style="font-size: 0.85rem; color: var(--text-secondary); list-style: none;">
              <li style="padding: 0.25rem 0;">â€¢ <strong>Phase 1:</strong> Static Analysis (Cost: $0)</li>
              <li style="padding: 0.25rem 0;">â€¢ <strong>Phase 2:</strong> Intent Verification (Sonnet)</li>
              <li style="padding: 0.25rem 0;">â€¢ <strong>Phase 3:</strong> Spec Compliance Check</li>
              <li style="padding: 0.25rem 0;">â€¢ <strong>Phase 4:</strong> Checkpoint Verification</li>
              <li style="padding: 0.25rem 0;">â€¢ Calculate drift score, retry if needed</li>
            </ul>
          </div>
        </div>

        <div class="card" style="margin-top: 1.5rem;">
          <div class="card-header">
            <span class="card-icon">ğŸ”„</span>
            <span class="card-title">Ralph Loop Primitive (OODA)</span>
          </div>
          <div class="flow-container">
            <div class="flow-box"><h5>O</h5><p>OBSERVE</p></div>
            <div class="flow-arrow">â†’</div>
            <div class="flow-box"><h5>O</h5><p>ORIENT</p></div>
            <div class="flow-arrow">â†’</div>
            <div class="flow-box"><h5>D</h5><p>DECIDE</p></div>
            <div class="flow-arrow">â†’</div>
            <div class="flow-box"><h5>A</h5><p>ACT</p></div>
            <div class="flow-arrow">â†’</div>
            <div class="flow-box primary"><h5>O</h5><p>OBSERVE</p></div>
          </div>
          <p style="font-size: 0.8rem; color: var(--text-muted); text-align: center;">
            The loop continues until verification passes or max retries exhausted
          </p>
        </div>
      </section>

      <!-- INTELLIGENT ROUTER SECTION -->
      <section id="model-router" class="section">
        <div class="section-header">
          <h2>ğŸ”€ Intelligent Router</h2>
          <p>Central orchestration layer that coordinates capacity tracking, smart selection, credential filtering, and workload chains to ensure work never stops.</p>
        </div>

        <h3>Core Architecture Flow</h3>
        <div class="code-block">
          <pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        INTELLIGENT ROUTER                            â”‚
â”‚                     (intelligent_router.py)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  Capacity   â”‚â”€â”€â”€â–¶â”‚ Smart Selection â”‚â”€â”€â”€â–¶â”‚  Workload Chain â”‚    â”‚
â”‚   â”‚  Tracker    â”‚    â”‚   (5 strategies)â”‚    â”‚  (4 workloads)  â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                    â”‚                       â”‚              â”‚
â”‚         â–¼                    â–¼                       â–¼              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ Credential  â”‚â”€â”€â”€â–¶â”‚   Round Robin   â”‚â”€â”€â”€â–¶â”‚   Rate Limit    â”‚    â”‚
â”‚   â”‚ Availabilityâ”‚    â”‚ Capacity-Aware  â”‚    â”‚    Failover     â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
        </div>

        <h3>Model Tier Pyramid (5 Tiers)</h3>
        <div class="tier-pyramid">
          <div class="tier-level tier-1">
            <span class="tier-label">Tier 1 â€¢ ARCHITECT</span>
            <span class="tier-model">Claude Opus 4.5, Kimi K2.5 Thinking, Qwen3-235B</span>
          </div>
          <div class="tier-level tier-2">
            <span class="tier-label">Tier 2 â€¢ BUILDER-HIGH</span>
            <span class="tier-model">Sonnet 4.5 Thinking, Codex 5.2, DeepSeek R1</span>
          </div>
          <div class="tier-level tier-3">
            <span class="tier-label">Tier 3 â€¢ BUILDER-MID</span>
            <span class="tier-model">Claude Sonnet 4.5, Gemini 3 Pro, MiniMax M2.1</span>
          </div>
          <div class="tier-level tier-4">
            <span class="tier-label">Tier 4 â€¢ LIBRARIAN</span>
            <span class="tier-model">Claude Haiku 4.5, Gemini 3 Flash, OpenRouter Free</span>
          </div>
          <div class="tier-level tier-5">
            <span class="tier-label">Tier 5 â€¢ SPRINTER</span>
            <span class="tier-model">Cerebras GLM 4.7 â€¢ 358B MoE â€¢ 1500+ tok/s</span>
          </div>
        </div>

        <div class="grid-2" style="margin-top: 2rem;">
          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ“</span>
              <span class="card-title">6 Core Routing Files</span>
            </div>
            <div class="code-block">
              <pre><span style="color: var(--accent-blue)">intelligent_router.py</span>      ~ 516 lines
  â†’ Central orchestration layer

<span style="color: var(--accent-green)">model_capacity.py</span>          ~ 717 lines
  â†’ Real-time capacity tracking

<span style="color: var(--accent-purple)">capacity_aware_round_robin.py</span> ~ 392 lines
  â†’ Enhanced round-robin with status

<span style="color: var(--accent-orange)">failover_config.py</span>         ~ 392+ lines
  â†’ Workload chains & provider limits

<span style="color: var(--accent-cyan)">smart_selection.py</span>         ~ 107+ lines
  â†’ Multi-factor model scoring

<span style="color: var(--accent-pink)">credential_availability.py</span> ~ 439 lines
  â†’ OAuth & API key validation</pre>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ¯</span>
              <span class="card-title">Design Philosophy</span>
            </div>
            <div class="code-block">
              <pre><span style="color: var(--accent-green)">âœ“</span> Work Never Stops
  Always find an available model

<span style="color: var(--accent-cyan)">âœ“</span> Proactive > Reactive
  Switch at 80% capacity, not 429

<span style="color: var(--accent-orange)">âœ“</span> Same-Tier First
  Maintain quality during failover

<span style="color: var(--accent-purple)">âœ“</span> Credential-First
  Never route to unconfigured models

<span style="color: var(--accent-blue)">âœ“</span> Telemetry-Driven
  Logfire integration for optimization</pre>
            </div>
          </div>
        </div>
      </section>

      <!-- CAPACITY TRACKING SECTION -->
      <section id="capacity" class="section">
        <div class="section-header">
          <h2>ğŸ“Š Capacity Tracking</h2>
          <p>Real-time monitoring of model capacity with proactive failover at 80% threshold.</p>
        </div>

        <div class="grid-2">
          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ“ˆ</span>
              <span class="card-title">Capacity Status Flow</span>
            </div>
            <div class="code-block">
              <pre>AVAILABLE (0-79%)
    â”‚
    â”‚ usage â‰¥ 80%
    â–¼
APPROACHING (80-94%)
    â”‚
    â”‚ usage â‰¥ 95%
    â–¼
LOW (95-99%)
    â”‚
    â”‚ usage = 100%
    â–¼
EXHAUSTED â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ COOLDOWN
                              â”‚
                              â”‚ cooldown expires
                              â–¼
                          AVAILABLE</pre>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <span class="card-icon">âš™ï¸</span>
              <span class="card-title">Key Thresholds</span>
            </div>
            <div class="table-container">
              <table>
                <thead>
                  <tr><th>Threshold</th><th>Value</th><th>Action</th></tr>
                </thead>
                <tbody>
                  <tr><td><span class="tag tag-green">APPROACHING</span></td><td>80%</td><td>Start proactive failover</td></tr>
                  <tr><td><span class="tag tag-orange">LOW</span></td><td>95%</td><td>Switch urgently</td></tr>
                  <tr><td><span class="tag tag-red">EXHAUSTED</span></td><td>100%</td><td>Enter cooldown</td></tr>
                  <tr><td><span class="tag tag-purple">COOLDOWN</span></td><td>60s default</td><td>Wait before retry</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top: 1.5rem;">
          <div class="card-header">
            <span class="card-icon">ğŸ”„</span>
            <span class="card-title">Model Capacity Manager (model_capacity.py)</span>
          </div>
          <div class="code-block">
            <pre><span style="color: var(--accent-blue)">class</span> <span style="color: var(--accent-cyan)">ModelCapacityManager</span>:
    <span style="color: var(--text-muted)"># Core tracking methods</span>
    <span style="color: var(--accent-green)">get_capacity_status</span>(model) â†’ CapacityStatus
    <span style="color: var(--accent-green)">update_capacity</span>(model, tokens_used, tokens_limit)
    <span style="color: var(--accent-green)">should_switch_proactively</span>(model) â†’ bool
    <span style="color: var(--accent-green)">get_available_models</span>(tier=None, workload=None)
    
    <span style="color: var(--text-muted)"># Called when status >= APPROACHING (80%)</span>
    <span style="color: var(--accent-orange)">trigger_proactive_failover</span>(current_model) â†’ next_model</pre>
          </div>
        </div>
      </section>

      <!-- SMART SELECTION SECTION -->
      <section id="smart-selection" class="section">
        <div class="section-header">
          <h2>ğŸ¯ Smart Model Selection</h2>
          <p>Multi-factor scoring system with 5 strategies and weighted selection criteria.</p>
        </div>

        <div class="grid-2">
          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ“Š</span>
              <span class="card-title">5 Selection Strategies</span>
            </div>
            <div class="table-container">
              <table>
                <thead>
                  <tr><th>Strategy</th><th>Priority Weights</th></tr>
                </thead>
                <tbody>
                  <tr><td><span class="tag tag-green">COST</span></td><td>Cost: 60%, Speed: 20%, Reliability: 20%</td></tr>
                  <tr><td><span class="tag tag-orange">SPEED</span></td><td>Speed: 60%, Cost: 20%, Reliability: 20%</td></tr>
                  <tr><td><span class="tag tag-blue">RELIABILITY</span></td><td>Reliability: 60%, Cost: 20%, Speed: 20%</td></tr>
                  <tr><td><span class="tag tag-purple">BALANCED</span></td><td>All: 33% each</td></tr>
                  <tr><td><span class="tag tag-cyan">CAPABILITY</span></td><td>Capability: 50%, Reliability: 30%, Cost: 20%</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ§®</span>
              <span class="card-title">Scoring Formula</span>
            </div>
            <div class="code-block">
              <pre><span style="color: var(--accent-blue)">def</span> <span style="color: var(--accent-cyan)">calculate_model_score</span>(model, strategy):
    score = <span style="color: var(--accent-orange)">0.0</span>
    
    <span style="color: var(--text-muted)"># Cost score (lower = better)</span>
    score += (1 - cost_ratio) * weight.cost
    
    <span style="color: var(--text-muted)"># Speed score (higher = better)</span>
    score += speed_ratio * weight.speed
    
    <span style="color: var(--text-muted)"># Reliability (success rate)</span>
    score += success_rate * weight.reliability
    
    <span style="color: var(--text-muted)"># Capacity bonus (available = +0.2)</span>
    if status == AVAILABLE:
        score += <span style="color: var(--accent-green)">0.2</span>
    
    <span style="color: var(--accent-purple)">return</span> score</pre>
            </div>
          </div>
        </div>
      </section>

      <!-- WORKLOAD CHAINS SECTION -->
      <section id="workload-chains" class="section">
        <div class="section-header">
          <h2>â›“ï¸ Workload Chains</h2>
          <p>4 specialized failover chains optimized for different task types with 35+ models across 8 providers.</p>
        </div>

        <div class="grid-2">
          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ—ï¸</span>
              <span class="card-title">ORCHESTRATOR Chain (Planning)</span>
            </div>
            <div class="code-block">
              <pre><span style="color: var(--accent-purple)">claude-code-claude-opus-4-5</span>
    â†“
<span style="color: var(--accent-purple)">antigravity-claude-opus-4-5-thinking-high</span>
    â†“
<span style="color: var(--accent-cyan)">synthetic-Kimi-K2.5-Thinking</span>
    â†“
<span style="color: var(--accent-orange)">synthetic-Kimi-K2-Thinking</span>
    â†“
<span style="color: var(--accent-green)">synthetic-hf-Qwen3-235B-A22B-Thinking</span></pre>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ§ </span>
              <span class="card-title">REASONING Chain</span>
            </div>
            <div class="code-block">
              <pre><span style="color: var(--accent-purple)">antigravity-claude-sonnet-4-5-thinking-high</span>
    â†“
<span style="color: var(--accent-cyan)">chatgpt-gpt-5.2</span>
    â†“
<span style="color: var(--accent-orange)">synthetic-hf-deepseek-ai-DeepSeek-R1</span>
    â†“
<span style="color: var(--accent-green)">antigravity-gemini-3-pro-high</span></pre>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ’»</span>
              <span class="card-title">CODING Chain</span>
            </div>
            <div class="code-block">
              <pre><span style="color: var(--accent-purple)">chatgpt-gpt-5.2-codex</span>
    â†“
<span style="color: var(--accent-cyan)">antigravity-claude-sonnet-4-5</span>
    â†“
<span style="color: var(--accent-orange)">Cerebras-GLM-4.7</span>
    â†“
<span style="color: var(--accent-green)">zai-glm-4.7-coding</span>
    â†“
<span style="color: var(--accent-blue)">synthetic-GLM-4.7</span></pre>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ“š</span>
              <span class="card-title">LIBRARIAN Chain (Context)</span>
            </div>
            <div class="code-block">
              <pre><span style="color: var(--accent-purple)">Gemini-3-Long-Context</span> <span style="color: var(--text-muted)">(2M tokens!)</span>
    â†“
<span style="color: var(--accent-cyan)">antigravity-gemini-3-flash</span>
    â†“
<span style="color: var(--accent-orange)">synthetic-MiniMax-M2.1</span> <span style="color: var(--text-muted)">(1M tokens)</span>
    â†“
<span style="color: var(--accent-green)">code-claude-claude-haiku-4-5</span></pre>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top: 1.5rem;">
          <div class="card-header">
            <span class="card-icon">ğŸ¢</span>
            <span class="card-title">Provider Rate Limits (PROVIDER_RATE_LIMITS)</span>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr><th>Provider</th><th>RPM</th><th>TPM</th><th>Auth Type</th></tr>
              </thead>
              <tbody>
                <tr><td><span class="tag tag-purple">claude_code</span></td><td>50</td><td>40,000</td><td>OAuth</td></tr>
                <tr><td><span class="tag tag-blue">antigravity</span></td><td>60</td><td>100,000</td><td>OAuth</td></tr>
                <tr><td><span class="tag tag-cyan">chatgpt</span></td><td>60</td><td>30,000</td><td>OAuth</td></tr>
                <tr><td><span class="tag tag-orange">cerebras</span></td><td>60</td><td>1,000,000</td><td>API Key</td></tr>
                <tr><td><span class="tag tag-green">gemini</span></td><td>60</td><td>1,000,000</td><td>API Key</td></tr>
                <tr><td><span class="tag tag-pink">synthetic</span></td><td>30</td><td>100,000</td><td>API Key</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- CREDENTIAL AVAILABILITY SECTION -->
      <section id="credentials" class="section">
        <div class="section-header">
          <h2>ğŸ” Credential Availability</h2>
          <p>Models are automatically excluded from routing if they lack valid credentials â€” no wasted API calls, clean failover chains.</p>
        </div>

        <div class="grid-4" style="margin-bottom: 2rem;">
          <div class="stat-card">
            <div class="stat-value">8</div>
            <div class="stat-label">Providers</div>
            <div class="stat-sub">OAuth + API Keys</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">34</div>
            <div class="stat-label">Models</div>
            <div class="stat-sub">Tracked</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">3</div>
            <div class="stat-label">OAuth</div>
            <div class="stat-sub">Claude, ChatGPT, Antigravity</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">Auto</div>
            <div class="stat-label">Cache</div>
            <div class="stat-sub">Invalidation</div>
          </div>
        </div>

        <div class="grid-2">
          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ”‘</span>
              <span class="card-title">Provider Credentials</span>
            </div>
            <div class="table-container">
              <table>
                <thead>
                  <tr><th>Provider</th><th>Type</th><th>Configuration</th></tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="tag tag-purple">claude_code</span></td>
                    <td>OAuth</td>
                    <td><code>/login claude</code></td>
                  </tr>
                  <tr>
                    <td><span class="tag tag-blue">antigravity</span></td>
                    <td>OAuth</td>
                    <td><code>/login antigravity</code></td>
                  </tr>
                  <tr>
                    <td><span class="tag tag-green">chatgpt</span></td>
                    <td>OAuth</td>
                    <td><code>/login chatgpt</code></td>
                  </tr>
                  <tr>
                    <td><span class="tag tag-orange">cerebras</span></td>
                    <td>API Key</td>
                    <td><code>/set cerebras_api_key = ...</code></td>
                  </tr>
                  <tr>
                    <td><span class="tag tag-cyan">synthetic</span></td>
                    <td>API Key</td>
                    <td><code>/set synthetic_api_key = ...</code></td>
                  </tr>
                  <tr>
                    <td><span class="tag tag-pink">openrouter</span></td>
                    <td>API Key</td>
                    <td><code>/set openrouter_api_key = ...</code></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ”„</span>
              <span class="card-title">Credential Check Flow</span>
            </div>
            <div class="code-block">
              <pre><span style="color: var(--accent-blue)">get_chain_for_workload</span>(CODING, <span style="color: var(--accent-green)">filter_by_credentials=True</span>)
    â”‚
    â–¼
<span style="color: var(--accent-purple)">For each model in chain:</span>
    â”‚
    â”œâ”€ OAuth Provider? â†’ Check tokens.json
    â”‚                    â””â”€ Valid access_token?
    â”‚
    â””â”€ API Key Provider? â†’ Check config + env
                           â””â”€ Try multiple key formats:
                              â€¢ SYN_API_KEY
                              â€¢ synthetic_api_key
                              â€¢ syn_api_key
    â”‚
    â–¼
<span style="color: var(--accent-green)">Return filtered chain with credentialed models only</span></pre>
            </div>
          </div>
        </div>

        <h3 style="margin-top: 2rem;">Integration Points</h3>
        <div class="code-block">
          <pre style="color: var(--text-secondary);">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          CREDENTIAL INTEGRATION POINTS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  <span style="color: var(--accent-blue)">intelligent_router.py</span>    â†’ Pre-filters models before selection                    â”‚
â”‚  <span style="color: var(--accent-green)">failover_config.py</span>       â†’ get_chain_for_workload(filter_by_credentials=True)     â”‚
â”‚  <span style="color: var(--accent-orange)">rate_limit_failover.py</span>   â†’ Filters failover chains and available models           â”‚
â”‚  <span style="color: var(--accent-cyan)">model_capacity.py</span>        â†’ Checks credentials before capacity check               â”‚
â”‚  <span style="color: var(--accent-purple)">smart_selection.py</span>       â†’ Skips uncredentialed models in scoring                 â”‚
â”‚                                                                                      â”‚
â”‚  Cache auto-invalidated on:                                                          â”‚
â”‚    â€¢ OAuth login success                                                             â”‚
â”‚    â€¢ API key set via /set                                                            â”‚
â”‚    â€¢ OAuth logout                                                                    â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
        </div>
      </section>

      <!-- CEREBRAS SECTION -->
      <section id="cerebras" class="section">
        <div class="section-header">
          <h2>âš¡ Cerebras GLM 4.7 Optimization</h2>
          <p>Implementation of all 10 rules from the official Cerebras GLM-4.7 Migration Guide.</p>
        </div>

        <div class="grid-4" style="margin-bottom: 2rem;">
          <div class="stat-card">
            <div class="stat-value">358B</div>
            <div class="stat-label">Parameters</div>
            <div class="stat-sub">32B active (MoE)</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">131K</div>
            <div class="stat-label">Context</div>
            <div class="stat-sub">Input tokens</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">40K</div>
            <div class="stat-label">Max Output</div>
            <div class="stat-sub">Output tokens</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">1500+</div>
            <div class="stat-label">tok/sec</div>
            <div class="stat-sub">20x faster</div>
          </div>
        </div>

        <h3>The 10 Rules</h3>
        <div class="rules-list">
          <div class="rule-item">
            <div class="rule-number">1</div>
            <div class="rule-content">
              <h5>Front-load Instructions</h5>
              <p><code>GLMPromptOptimizer.FRONT_LOADED_DIRECTIVES</code></p>
            </div>
          </div>
          <div class="rule-item">
            <div class="rule-number">2</div>
            <div class="rule-content">
              <h5>Use MUST/STRICTLY Language</h5>
              <p><code>optimize_user_message()</code> replacements</p>
            </div>
          </div>
          <div class="rule-item">
            <div class="rule-number">3</div>
            <div class="rule-content">
              <h5>Specify Default Language</h5>
              <p><code>LANGUAGE_DIRECTIVE</code> = "English only"</p>
            </div>
          </div>
          <div class="rule-item">
            <div class="rule-number">4</div>
            <div class="rule-content">
              <h5>Leverage Role-Play Personas</h5>
              <p><code>persona</code> parameter with structured prompts</p>
            </div>
          </div>
          <div class="rule-item">
            <div class="rule-number">5</div>
            <div class="rule-content">
              <h5>Break Up Tasks</h5>
              <p><code>TaskDecomposer.decompose()</code> with templates</p>
            </div>
          </div>
          <div class="rule-item">
            <div class="rule-number">6</div>
            <div class="rule-content">
              <h5>Disable Reasoning When Not Needed</h5>
              <p><code>disable_reasoning: True</code> in extra_body</p>
            </div>
          </div>
          <div class="rule-item">
            <div class="rule-number">7</div>
            <div class="rule-content">
              <h5>Enable Reasoning for Complex</h5>
              <p><code>disable_reasoning: False</code> (default)</p>
            </div>
          </div>
          <div class="rule-item">
            <div class="rule-number">8</div>
            <div class="rule-content">
              <h5>Use Critic Agents</h5>
              <p><code>RalphLoopVerifier</code> + Shepherd/Watchdog</p>
            </div>
          </div>
          <div class="rule-item">
            <div class="rule-number">9</div>
            <div class="rule-content">
              <h5>Pair with Frontier Models</h5>
              <p>Opus plans â†’ GLM executes architecture</p>
            </div>
          </div>
          <div class="rule-item">
            <div class="rule-number">10</div>
            <div class="rule-content">
              <h5>Use clear_thinking</h5>
              <p><code>clear_thinking: true/false</code> in extra_body</p>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top: 2rem;">
          <div class="card-header">
            <span class="card-icon">âš™ï¸</span>
            <span class="card-title">API Configuration</span>
          </div>
          <div class="code-block">
            <pre><span style="color: var(--accent-purple)"># model_factory.py - GLM 4.7 settings</span>
CerebrasGLMSettings:
    model_id: <span style="color: var(--accent-green)">"zai-glm-4.7"</span>
    temperature: <span style="color: var(--accent-orange)">1.0</span>           <span style="color: var(--text-muted)"># Recommended default</span>
    top_p: <span style="color: var(--accent-orange)">0.95</span>                <span style="color: var(--text-muted)"># Recommended default</span>
    max_context: <span style="color: var(--accent-orange)">131_000</span>       <span style="color: var(--text-muted)"># 131K input tokens</span>
    max_output: <span style="color: var(--accent-orange)">40_000</span>         <span style="color: var(--text-muted)"># 40K output tokens</span>
    disable_reasoning: <span style="color: var(--accent-cyan)">bool</span>    <span style="color: var(--text-muted)"># Rule #6/#7</span>
    clear_thinking: <span style="color: var(--accent-cyan)">bool</span>       <span style="color: var(--text-muted)"># Rule #10</span>

<span style="color: var(--accent-purple)"># Passed via extra_body for OpenAI-compatible SDK</span>
extra_body = {
    <span style="color: var(--accent-green)">"disable_reasoning"</span>: disable_reasoning,
    <span style="color: var(--accent-green)">"clear_thinking"</span>: clear_thinking,
    <span style="color: var(--accent-green)">"thinking"</span>: {
        <span style="color: var(--accent-green)">"type"</span>: <span style="color: var(--accent-green)">"enabled"</span> | <span style="color: var(--accent-green)">"disabled"</span>,
        <span style="color: var(--accent-green)">"clear_thinking"</span>: <span style="color: var(--accent-cyan)">True</span> | <span style="color: var(--accent-cyan)">False</span>
    }
}</pre>
          </div>
        </div>
      </section>

      <!-- TOKEN BUDGET SECTION -->
      <section id="token-budget" class="section">
        <div class="section-header">
          <h2>ğŸ’° Token Budget Manager</h2>
          <p>Rate limiting and cost management across providers to prevent 429 errors and optimize spending.</p>
        </div>

        <div class="grid-4">
          <div class="card" style="text-align: center;">
            <h4 style="color: var(--accent-orange);">Cerebras</h4>
            <div style="font-size: 1.5rem; font-weight: 700; font-family: var(--font-mono);">300K</div>
            <div style="font-size: 0.75rem; color: var(--text-muted);">tokens/min</div>
            <div style="font-size: 0.9rem; margin-top: 0.5rem;">24M/day</div>
          </div>
          <div class="card" style="text-align: center;">
            <h4 style="color: var(--accent-blue);">Gemini</h4>
            <div style="font-size: 1.5rem; font-weight: 700; font-family: var(--font-mono);">~100K</div>
            <div style="font-size: 0.75rem; color: var(--text-muted);">tokens/min</div>
            <div style="font-size: 0.9rem; margin-top: 0.5rem;">~2M/day</div>
          </div>
          <div class="card" style="text-align: center;">
            <h4 style="color: var(--accent-purple);">Anthropic</h4>
            <div style="font-size: 1.5rem; font-weight: 700; font-family: var(--font-mono);">~100K</div>
            <div style="font-size: 0.75rem; color: var(--text-muted);">tokens/min</div>
            <div style="font-size: 0.9rem; margin-top: 0.5rem;">~1M/day</div>
          </div>
          <div class="card" style="text-align: center;">
            <h4 style="color: var(--accent-green);">OpenAI</h4>
            <div style="font-size: 1.5rem; font-weight: 700; font-family: var(--font-mono);">~100K</div>
            <div style="font-size: 0.75rem; color: var(--text-muted);">tokens/min</div>
            <div style="font-size: 0.9rem; margin-top: 0.5rem;">~1M/day</div>
          </div>
        </div>

        <div class="card" style="margin-top: 1.5rem;">
          <div class="card-header">
            <span class="card-icon">ğŸ“Š</span>
            <span class="card-title">Budget Check Flow</span>
          </div>
          <div class="code-block">
            <pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Estimate Tokens â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Yes    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Under Limit?   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Proceed with requestâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ No
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Wait    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Failover avail?â”‚â”€â”€â”€â”€â”€Yesâ”€â”€â”€â”€â–ºâ”‚ Route to alt model  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ No
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Wait for reset â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
          </div>
        </div>

        <div class="grid-2" style="margin-top: 1.5rem;">
          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ’µ</span>
              <span class="card-title">Cost Tracking (genai-prices)</span>
            </div>
            <div class="code-block">
              <pre><span style="color: var(--accent-purple)">from</span> genai_prices <span style="color: var(--accent-purple)">import</span> Usage, calc_price

Usage:
    model: <span style="color: var(--accent-cyan)">str</span>
    input_tokens: <span style="color: var(--accent-cyan)">int</span>
    output_tokens: <span style="color: var(--accent-cyan)">int</span>

calc_price(usage) â†’ <span style="color: var(--accent-green)">Decimal</span> (USD)</pre>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ“ˆ</span>
              <span class="card-title">Tracked Metrics</span>
            </div>
            <ul style="font-size: 0.85rem; list-style: none;">
              <li style="padding: 0.4rem 0; border-bottom: 1px solid var(--border-color);">
                <code>total_cost_usd</code> â€” Session total
              </li>
              <li style="padding: 0.4rem 0; border-bottom: 1px solid var(--border-color);">
                <code>cost_this_minute</code> â€” Rate tracking
              </li>
              <li style="padding: 0.4rem 0; border-bottom: 1px solid var(--border-color);">
                <code>cost_today</code> â€” Daily budget
              </li>
              <li style="padding: 0.4rem 0;">
                <code>tokens_used_*</code> â€” Per-provider tracking
              </li>
            </ul>
          </div>
        </div>
      </section>

      <!-- AGENTS SECTION -->
      <section id="agents" class="section">
        <div class="section-header">
          <h2>ğŸ• Agent System</h2>
          <p>Specialized agents for different tasks, coordinated by the Pack Leader orchestrator.</p>
        </div>

        <div class="card">
          <div class="card-header">
            <span class="card-icon">ğŸ—ï¸</span>
            <span class="card-title">BaseAgent Architecture</span>
          </div>
          <ul style="font-size: 0.85rem; list-style: none; color: var(--text-secondary);">
            <li style="padding: 0.4rem 0;">â€¢ Pydantic-AI integration (<code>DBOSAgent</code> for durability)</li>
            <li style="padding: 0.4rem 0;">â€¢ Tool registration & execution</li>
            <li style="padding: 0.4rem 0;">â€¢ Context compression & token management</li>
            <li style="padding: 0.4rem 0;">â€¢ Logfire tracing & callbacks</li>
          </ul>
        </div>

        <h3 style="margin-top: 2rem;">The Pack ğŸº</h3>
        <div class="agent-grid">
          <div class="agent-card">
            <div class="agent-icon">ğŸº</div>
            <div class="agent-name">Pack Leader</div>
            <div class="agent-role">Orchestrator</div>
          </div>
          <div class="agent-card">
            <div class="agent-icon">ğŸ•</div>
            <div class="agent-name">Code Puppy</div>
            <div class="agent-role">Main Agent</div>
          </div>
          <div class="agent-card">
            <div class="agent-icon">ğŸ•â€ğŸ¦º</div>
            <div class="agent-name">Bloodhound</div>
            <div class="agent-role">Issue Tracking</div>
          </div>
          <div class="agent-card">
            <div class="agent-icon">ğŸ•</div>
            <div class="agent-name">Terrier</div>
            <div class="agent-role">Worktrees</div>
          </div>
          <div class="agent-card">
            <div class="agent-icon">ğŸº</div>
            <div class="agent-name">Husky</div>
            <div class="agent-role">Execution</div>
          </div>
          <div class="agent-card">
            <div class="agent-icon">ğŸ•</div>
            <div class="agent-name">Shepherd</div>
            <div class="agent-role">Code Review</div>
          </div>
          <div class="agent-card">
            <div class="agent-icon">ğŸ•â€ğŸ¦º</div>
            <div class="agent-name">Watchdog</div>
            <div class="agent-role">QA/Testing</div>
          </div>
          <div class="agent-card">
            <div class="agent-icon">ğŸ¦®</div>
            <div class="agent-name">Retriever</div>
            <div class="agent-role">Merging</div>
          </div>
        </div>

        <h3 style="margin-top: 2rem;">Specialist Agents</h3>
        <div class="agent-grid">
          <div class="agent-card">
            <div class="agent-icon">ğŸ</div>
            <div class="agent-name">Python Reviewer</div>
            <div class="agent-role">Language Expert</div>
          </div>
          <div class="agent-card">
            <div class="agent-icon">ğŸ“˜</div>
            <div class="agent-name">TypeScript Rev.</div>
            <div class="agent-role">Language Expert</div>
          </div>
          <div class="agent-card">
            <div class="agent-icon">ğŸ”µ</div>
            <div class="agent-name">Go Reviewer</div>
            <div class="agent-role">Language Expert</div>
          </div>
          <div class="agent-card">
            <div class="agent-icon">âš¡</div>
            <div class="agent-name">C/C++ Reviewer</div>
            <div class="agent-role">Language Expert</div>
          </div>
          <div class="agent-card">
            <div class="agent-icon">ğŸ”’</div>
            <div class="agent-name">Security Auditor</div>
            <div class="agent-role">Security</div>
          </div>
          <div class="agent-card">
            <div class="agent-icon">ğŸ“‹</div>
            <div class="agent-name">QA Expert</div>
            <div class="agent-role">Quality</div>
          </div>
          <div class="agent-card">
            <div class="agent-icon">ğŸ§ </div>
            <div class="agent-name">Epistemic Arch.</div>
            <div class="agent-role">Planning</div>
          </div>
          <div class="agent-card">
            <div class="agent-icon">â˜€ï¸</div>
            <div class="agent-name">Helios</div>
            <div class="agent-role">Special</div>
          </div>
        </div>
      </section>

      <!-- TOOLS SECTION -->
      <section id="tools" class="section">
        <div class="section-header">
          <h2>ğŸ”§ Tools Layer</h2>
          <p>Comprehensive tool system for file operations, command execution, and token management.</p>
        </div>

        <div class="grid-3">
          <div class="card">
            <h4>ğŸ“ File Operations</h4>
            <ul style="font-size: 0.8rem; list-style: none; color: var(--text-secondary);">
              <li style="padding: 0.3rem 0;"><code>read_file</code></li>
              <li style="padding: 0.3rem 0;"><code>write_file</code></li>
              <li style="padding: 0.3rem 0;"><code>list_files</code></li>
              <li style="padding: 0.3rem 0;"><code>grep</code></li>
              <li style="padding: 0.3rem 0;"><code>edit_file</code></li>
            </ul>
          </div>
          <div class="card">
            <h4>ğŸ’» Command Execution</h4>
            <ul style="font-size: 0.8rem; list-style: none; color: var(--text-secondary);">
              <li style="padding: 0.3rem 0;"><code>agent_run_shell_command</code></li>
              <li style="padding: 0.3rem 0;"><code>ShellGovernor</code></li>
              <li style="padding: 0.3rem 0;"><code>CommandRunner</code></li>
              <li style="padding: 0.3rem 0;"><code>safe_patch</code></li>
            </ul>
          </div>
          <div class="card">
            <h4>ğŸ“Š Token Management</h4>
            <ul style="font-size: 0.8rem; list-style: none; color: var(--text-secondary);">
              <li style="padding: 0.3rem 0;"><code>TokenBudgetGuard</code></li>
              <li style="padding: 0.3rem 0;"><code>TokenSlimmer</code></li>
              <li style="padding: 0.3rem 0;"><code>IOBudgetEnforcer</code></li>
              <li style="padding: 0.3rem 0;"><code>ContextLoader</code></li>
            </ul>
          </div>
          <div class="card">
            <h4>ğŸ¤– Agent Tools</h4>
            <ul style="font-size: 0.8rem; list-style: none; color: var(--text-secondary);">
              <li style="padding: 0.3rem 0;"><code>invoke_agent</code></li>
              <li style="padding: 0.3rem 0;"><code>list_agents</code></li>
              <li style="padding: 0.3rem 0;"><code>subagent_context</code></li>
              <li style="padding: 0.3rem 0;"><code>share_reasoning</code></li>
            </ul>
          </div>
          <div class="card">
            <h4>ğŸ–¥ï¸ Display Tools</h4>
            <ul style="font-size: 0.8rem; list-style: none; color: var(--text-secondary);">
              <li style="padding: 0.3rem 0;"><code>agent_display</code></li>
              <li style="padding: 0.3rem 0;"><code>router_hooks</code></li>
              <li style="padding: 0.3rem 0;"><code>tools_content</code></li>
            </ul>
          </div>
          <div class="card">
            <h4>âš¡ Cerebras Optimizer</h4>
            <ul style="font-size: 0.8rem; list-style: none; color: var(--text-secondary);">
              <li style="padding: 0.3rem 0;"><code>GLMPromptOptimizer</code></li>
              <li style="padding: 0.3rem 0;"><code>TaskDecomposer</code></li>
              <li style="padding: 0.3rem 0;"><code>CerebrasGLMSettings</code></li>
            </ul>
          </div>
        </div>
      </section>

      <!-- MCP SECTION -->
      <section id="mcp" class="section">
        <div class="section-header">
          <h2>ğŸ”Œ MCP Infrastructure</h2>
          <p>Model Context Protocol server management with lifecycle control and health monitoring.</p>
        </div>

        <div class="card">
          <div class="card-header">
            <span class="card-icon">ğŸ”„</span>
            <span class="card-title">MCPManager</span>
          </div>
          <div class="grid-2">
            <div>
              <h4>Capabilities</h4>
              <ul style="font-size: 0.85rem; list-style: none; color: var(--text-secondary);">
                <li style="padding: 0.3rem 0;">â€¢ Server lifecycle management</li>
                <li style="padding: 0.3rem 0;">â€¢ Pydantic-AI compatibility</li>
                <li style="padding: 0.3rem 0;">â€¢ Circuit breaker integration</li>
                <li style="padding: 0.3rem 0;">â€¢ Health monitoring</li>
                <li style="padding: 0.3rem 0;">â€¢ Automatic quarantine on failures</li>
              </ul>
            </div>
            <div>
              <h4>Server Types</h4>
              <ul style="font-size: 0.85rem; list-style: none; color: var(--text-secondary);">
                <li style="padding: 0.3rem 0;"><span class="tag tag-blue">STDIO</span> Local process</li>
                <li style="padding: 0.3rem 0;"><span class="tag tag-green">SSE</span> Server-Sent Events</li>
                <li style="padding: 0.3rem 0;"><span class="tag tag-purple">HTTP</span> Streamable HTTP</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top: 1.5rem;">
          <div class="card-header">
            <span class="card-icon">ğŸ“Š</span>
            <span class="card-title">Server State Machine</span>
          </div>
          <div class="code-block">
            <pre>STOPPED â”€â”€â–º STARTING â”€â”€â–º RUNNING â”€â”€â–º STOPPING â”€â”€â–º STOPPED
    â”‚                        â”‚
    â”‚                        â–¼
    â”‚                   QUARANTINED
    â”‚                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
          </div>
        </div>
      </section>

      <!-- MESSAGING SECTION -->
      <section id="messaging" class="section">
        <div class="section-header">
          <h2>ğŸ“¨ Messaging Bus</h2>
          <p>Bidirectional Agent â†” UI communication with request/response correlation.</p>
        </div>

        <div class="card">
          <div class="card-header">
            <span class="card-icon">ğŸ”„</span>
            <span class="card-title">MessageBus Architecture</span>
          </div>
          <div class="code-block">
            <pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       MessageBus                             â”‚
â”‚                                                             â”‚
â”‚  <span style="color: var(--accent-green)">Agent â†’ UI (Outgoing):</span>                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ TextMessage â”‚ ConfirmationRequest â”‚ SelectionRequest â”‚   â”‚
â”‚  â”‚ ToolResult  â”‚ UserInputRequest    â”‚ ProgressUpdate   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  <span style="color: var(--accent-blue)">UI â†’ Agent (Incoming):</span>                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ UserInputResponse â”‚ ConfirmationResponse â”‚ Cancel   â”‚   â”‚
â”‚  â”‚ SelectionResponse â”‚ Abort               â”‚           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  <span style="color: var(--accent-purple)">Request/Response Correlation:</span>                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ prompt_id â†’ asyncio.Future                          â”‚   â”‚
â”‚  â”‚ â€¢ request_input() waits on Future                   â”‚   â”‚
â”‚  â”‚ â€¢ provide_response() resolves Future                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
          </div>
        </div>
      </section>

      <!-- OBSERVABILITY SECTION -->
      <section id="observability" class="section">
        <div class="section-header">
          <h2>ğŸ“Š Observability</h2>
          <p>Logfire instrumentation for full tracing of all operations.</p>
        </div>

        <div class="grid-2">
          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ”</span>
              <span class="card-title">Logfire Spans</span>
            </div>
            <div class="table-container">
              <table>
                <thead>
                  <tr><th>Span Name</th><th>Module</th></tr>
                </thead>
                <tbody>
                  <tr><td><code>Ralph Loop</code></td><td>Orchestrator</td></tr>
                  <tr><td><code>Ralph Iteration</code></td><td>Orchestrator</td></tr>
                  <tr><td><code>Execute Code Generation</code></td><td>Orchestrator</td></tr>
                  <tr><td><code>Execute Milestone</code></td><td>Orchestrator</td></tr>
                  <tr><td><code>Slice Context</code></td><td>Curator</td></tr>
                  <tr><td><code>Verify Code Generation</code></td><td>Verifier</td></tr>
                  <tr><td><code>Static Analysis</code></td><td>Verifier</td></tr>
                  <tr><td><code>Intent Verification</code></td><td>Verifier</td></tr>
                  <tr><td><code>Husky Execute</code></td><td>Husky</td></tr>
                  <tr><td><code>Build Prompt</code></td><td>Husky</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <span class="card-icon">ğŸ“ˆ</span>
              <span class="card-title">Tracked Metrics</span>
            </div>
            <ul style="font-size: 0.85rem; list-style: none;">
              <li style="padding: 0.4rem 0; border-bottom: 1px solid var(--border-color);">
                Token usage (input/output per provider)
              </li>
              <li style="padding: 0.4rem 0; border-bottom: 1px solid var(--border-color);">
                Cost per request (genai-prices)
              </li>
              <li style="padding: 0.4rem 0; border-bottom: 1px solid var(--border-color);">
                Latency (per model, per provider)
              </li>
              <li style="padding: 0.4rem 0; border-bottom: 1px solid var(--border-color);">
                Error rates (429s, timeouts, failures)
              </li>
              <li style="padding: 0.4rem 0; border-bottom: 1px solid var(--border-color);">
                Drift scores (verification)
              </li>
              <li style="padding: 0.4rem 0;">
                Retry counts (Ralph Loop)
              </li>
            </ul>
          </div>
        </div>
      </section>

      <!-- FILES SECTION -->
      <section id="files" class="section">
        <div class="section-header">
          <h2>ğŸ“ File Structure</h2>
          <p>Complete directory layout of the Code Puppy codebase.</p>
        </div>

        <div class="card">
          <div class="code-block">
            <pre class="tree"><span class="folder">code_puppy/</span>
â”œâ”€â”€ <span class="file">__main__.py</span>              <span style="color: var(--text-muted)"># Entry point</span>
â”œâ”€â”€ <span class="file">main.py</span>                  <span style="color: var(--text-muted)"># Main application</span>
â”œâ”€â”€ <span class="file">cli_runner.py</span>            <span style="color: var(--text-muted)"># CLI interface</span>
â”œâ”€â”€ <span class="file">config.py</span>                <span style="color: var(--text-muted)"># Configuration management</span>
â”œâ”€â”€ <span class="file">model_factory.py</span>         <span style="color: var(--text-muted)"># Model instantiation</span>
â”œâ”€â”€ <span class="file">session_storage.py</span>       <span style="color: var(--text-muted)"># Session persistence</span>
â”‚
â”œâ”€â”€ <span class="folder">core/</span>                    <span style="color: var(--text-muted)"># Core infrastructure</span>
â”‚   â”œâ”€â”€ <span class="highlight">epistemic_orchestrator.py</span>  <span style="color: var(--text-muted)"># ğŸ§  Plan â†’ Execute â†’ Verify</span>
â”‚   â”œâ”€â”€ <span class="highlight">husky_execution.py</span>        <span style="color: var(--text-muted)"># ğŸ¦® Cerebras GLM execution</span>
â”‚   â”œâ”€â”€ <span class="highlight">model_router.py</span>           <span style="color: var(--text-muted)"># ğŸ”€ Tier-based routing</span>
â”‚   â”œâ”€â”€ <span class="file">token_budget.py</span>           <span style="color: var(--text-muted)"># ğŸ’° Rate limiting</span>
â”‚   â”œâ”€â”€ <span class="file">context_compressor.py</span>     <span style="color: var(--text-muted)"># ğŸ“¦ Context reduction</span>
â”‚   â”œâ”€â”€ <span class="file">circuit_breaker.py</span>        <span style="color: var(--text-muted)"># âš¡ Fault tolerance</span>
â”‚   â””â”€â”€ <span class="file">connection_pool.py</span>        <span style="color: var(--text-muted)"># ğŸ”Œ HTTP pooling</span>
â”‚
â”œâ”€â”€ <span class="folder">agents/</span>                  <span style="color: var(--text-muted)"># Agent definitions</span>
â”‚   â”œâ”€â”€ <span class="file">base_agent.py</span>            <span style="color: var(--text-muted)"># Base class</span>
â”‚   â”œâ”€â”€ <span class="file">agent_code_puppy.py</span>      <span style="color: var(--text-muted)"># Main agent</span>
â”‚   â”œâ”€â”€ <span class="file">agent_pack_leader.py</span>     <span style="color: var(--text-muted)"># Orchestrator</span>
â”‚   â””â”€â”€ <span class="folder">pack/</span>                    <span style="color: var(--text-muted)"># Pack dogs</span>
â”‚       â”œâ”€â”€ <span class="file">bloodhound.py</span>
â”‚       â”œâ”€â”€ <span class="file">husky.py</span>
â”‚       â”œâ”€â”€ <span class="file">shepherd.py</span>
â”‚       â””â”€â”€ <span class="file">...</span>
â”‚
â”œâ”€â”€ <span class="folder">tools/</span>                   <span style="color: var(--text-muted)"># Tool implementations</span>
â”‚   â”œâ”€â”€ <span class="file">agent_tools.py</span>
â”‚   â”œâ”€â”€ <span class="file">file_operations.py</span>
â”‚   â”œâ”€â”€ <span class="file">token_slimmer.py</span>
â”‚   â””â”€â”€ <span class="file">...</span>
â”‚
â”œâ”€â”€ <span class="folder">mcp_/</span>                    <span style="color: var(--text-muted)"># MCP infrastructure</span>
â”‚   â”œâ”€â”€ <span class="file">manager.py</span>
â”‚   â”œâ”€â”€ <span class="file">managed_server.py</span>
â”‚   â””â”€â”€ <span class="file">registry.py</span>
â”‚
â”œâ”€â”€ <span class="folder">messaging/</span>               <span style="color: var(--text-muted)"># Event system</span>
â”‚   â”œâ”€â”€ <span class="file">bus.py</span>
â”‚   â”œâ”€â”€ <span class="file">messages.py</span>
â”‚   â””â”€â”€ <span class="file">renderers.py</span>
â”‚
â”œâ”€â”€ <span class="folder">plugins/</span>                 <span style="color: var(--text-muted)"># Plugin system</span>
â”‚   â”œâ”€â”€ <span class="folder">ralph/</span>              <span style="color: var(--text-muted)"># Epistemic runtime</span>
â”‚   â””â”€â”€ <span class="folder">shell_safety/</span>
â”‚
â””â”€â”€ <span class="folder">epistemic/</span>              <span style="color: var(--text-muted)"># Epistemic Agent Runtime</span>
    â””â”€â”€ <span class="folder">ear-runtime/</span>
        â””â”€â”€ <span class="folder">src/ear/core/</span>
            â”œâ”€â”€ <span class="file">ralph_loop.py</span>
            â””â”€â”€ <span class="file">state.py</span></pre>
          </div>
        </div>
      </section>

    </main>
  </div>

  <script>
    // Mobile Menu Toggle
    const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
    const sidebar = document.querySelector('.sidebar');
    const sidebarOverlay = document.querySelector('.sidebar-overlay');

    const toggleMobileMenu = () => {
      sidebar.classList.toggle('active');
      sidebarOverlay.classList.toggle('active');
    };

    mobileMenuToggle.addEventListener('click', toggleMobileMenu);
    sidebarOverlay.addEventListener('click', toggleMobileMenu);

    // Navigation
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', () => {
        // Update nav
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        item.classList.add('active');
        
        // Update sections
        const target = item.dataset.section;
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById(target).classList.add('active');
        
        // Close mobile menu on navigation
        if (window.innerWidth <= 768) {
          sidebar.classList.remove('active');
          sidebarOverlay.classList.remove('active');
        }
        
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });

    // Animate stats on load
    const animateValue = (el, start, end, duration) => {
      const range = end - start;
      const startTime = performance.now();
      
      const update = (currentTime) => {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const current = Math.floor(start + range * progress);
        el.textContent = current.toLocaleString();
        
        if (progress < 1) {
          requestAnimationFrame(update);
        }
      };
      
      requestAnimationFrame(update);
    };

    // Animate metrics bars
    document.querySelectorAll('.metric-fill').forEach(bar => {
      const width = bar.style.width;
      bar.style.width = '0';
      setTimeout(() => {
        bar.style.width = width;
      }, 100);
    });

    // Handle window resize - close mobile menu when resizing to desktop
    window.addEventListener('resize', () => {
      if (window.innerWidth > 768) {
        sidebar.classList.remove('active');
        sidebarOverlay.classList.remove('active');
      }
    });
  </script>
</body>
</html>
